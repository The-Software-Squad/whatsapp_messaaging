{
  "version": 3,
  "sources": ["../../../../../apps/whatsapp_messaging/whatsapp_messaging/public/js/whatsapp_messaging.bundle.js"],
  "sourcesContent": ["$(document).on('app_ready', function () {\n\tfrappe.call({\n\t\tmethod: 'whatsapp_messaging.whatsapp_messaging.doctype.whatsapp_message_template.whatsapp_message_template.get_template_doctypes',\n\t\tcallback: function (response) {\n\t\t\tif (response.message) {\n\t\t\t\tvar templates_details = response.message;\n\t\t\t\t$.each(Object.keys(templates_details), function (i, doctype) {\n\t\t\t\t\tfrappe.ui.form.on(doctype, \"refresh\", function (frm) {\n\t\t\t\t\t\taddCustomButtons(frm, templates_details[doctype]);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n});\n\nfunction addCustomButtons(frm, templates) {\n\tfor (const template in templates) {\n\t\tfrm.add_custom_button(templates[template].label, function () {\n\t\t\tsendWhatsAppMessage(frm, templates[template]);\n\t\t}, __('WhatsApp Messaging'));\n\t}\n}\n\nfunction sendWhatsAppMessage(frm, template) {\n\tfrappe.call({\n\t\tmethod: 'whatsapp_messaging.controller.whatsapp_messaging_on_custom_trigger_handler',\n\t\targs: {\n\t\t\ttemplate_name: template.name,\n\t\t\tdoctype: frm.doctype,\n\t\t\tdocname: frm.doc.name\n\t\t},\n\t\tcallback: function (response) {\n\t\t\tif (response.message) {\n\t\t\t\tvar message = response.message;\n\t\t\t\tvar phone = frm.doc.phone;\n\t\t\t\tvar url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;\n\t\t\t\twindow.open(url, '_blank');\n\t\t\t}\n\t\t}\n\t});\n}\n"],
  "mappings": ";;AAAA,IAAE,QAAQ,EAAE,GAAG,aAAa,WAAY;AACvC,WAAO,KAAK;AAAA,MACX,QAAQ;AAAA,MACR,UAAU,SAAU,UAAU;AAC7B,YAAI,SAAS,SAAS;AACrB,cAAI,oBAAoB,SAAS;AACjC,YAAE,KAAK,OAAO,KAAK,iBAAiB,GAAG,SAAU,GAAG,SAAS;AAC5D,mBAAO,GAAG,KAAK,GAAG,SAAS,WAAW,SAAU,KAAK;AACpD,+BAAiB,KAAK,kBAAkB,QAAQ;AAAA,YACjD,CAAC;AAAA,UACF,CAAC;AAAA,QACF;AAAA,MACD;AAAA,IACD,CAAC;AAAA,EACF,CAAC;AAED,WAAS,iBAAiB,KAAK,WAAW;AACzC,eAAW,YAAY,WAAW;AACjC,UAAI,kBAAkB,UAAU,UAAU,OAAO,WAAY;AAC5D,4BAAoB,KAAK,UAAU,SAAS;AAAA,MAC7C,GAAG,GAAG,oBAAoB,CAAC;AAAA,IAC5B;AAAA,EACD;AAEA,WAAS,oBAAoB,KAAK,UAAU;AAC3C,WAAO,KAAK;AAAA,MACX,QAAQ;AAAA,MACR,MAAM;AAAA,QACL,eAAe,SAAS;AAAA,QACxB,SAAS,IAAI;AAAA,QACb,SAAS,IAAI,IAAI;AAAA,MAClB;AAAA,MACA,UAAU,SAAU,UAAU;AAC7B,YAAI,SAAS,SAAS;AACrB,cAAI,UAAU,SAAS;AACvB,cAAI,QAAQ,IAAI,IAAI;AACpB,cAAI,MAAM,iBAAiB,cAAc,mBAAmB,OAAO;AACnE,iBAAO,KAAK,KAAK,QAAQ;AAAA,QAC1B;AAAA,MACD;AAAA,IACD,CAAC;AAAA,EACF;",
  "names": []
}
