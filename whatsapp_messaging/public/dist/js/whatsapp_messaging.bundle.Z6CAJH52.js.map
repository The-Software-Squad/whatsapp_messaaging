{
  "version": 3,
  "sources": ["../../../../../apps/whatsapp_messaging/whatsapp_messaging/public/js/whatsapp_messaging.bundle.js"],
  "sourcesContent": ["$(document).on(\"app_ready\", function () {\n  frappe.call({\n    method:\n      \"whatsapp_messaging.whatsapp_messaging.doctype.whatsapp_message_template.whatsapp_message_template.get_template_doctypes\",\n    callback: function (response) {\n      if (response.message) {\n        var templates_details = response.message;\n        $.each(Object.keys(templates_details), function (i, doctype) {\n          frappe.ui.form.on(doctype, \"refresh\", function (frm) {\n            addCustomButtons(frm, templates_details[doctype]);\n          });\n        });\n      }\n    },\n  });\n});\n\nfunction addCustomButtons(frm, templates) {\n  for (const template in templates) {\n    frm.add_custom_button(\n      templates[template].label,\n      function () {\n        sendWhatsAppMessage(frm, templates[template]);\n      },\n      __(\"WhatsApp Messaging\"),\n    );\n  }\n}\n\nfunction sendWhatsAppMessage(frm, template) {\n  frappe.call({\n    method:\n      \"whatsapp_messaging.controller.whatsapp_messaging_on_custom_trigger_handler\",\n    args: {\n      template_name: template.name,\n      doctype: frm.doctype,\n      docname: frm.doc.name,\n    },\n    callback: function (response) {\n      if (response.message) {\n        //@todo: show success message\n      }\n    },\n  });\n}\n"],
  "mappings": ";;AAAA,IAAE,QAAQ,EAAE,GAAG,aAAa,WAAY;AACtC,WAAO,KAAK;AAAA,MACV,QACE;AAAA,MACF,UAAU,SAAU,UAAU;AAC5B,YAAI,SAAS,SAAS;AACpB,cAAI,oBAAoB,SAAS;AACjC,YAAE,KAAK,OAAO,KAAK,iBAAiB,GAAG,SAAU,GAAG,SAAS;AAC3D,mBAAO,GAAG,KAAK,GAAG,SAAS,WAAW,SAAU,KAAK;AACnD,+BAAiB,KAAK,kBAAkB,QAAQ;AAAA,YAClD,CAAC;AAAA,UACH,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH,CAAC;AAED,WAAS,iBAAiB,KAAK,WAAW;AACxC,eAAW,YAAY,WAAW;AAChC,UAAI;AAAA,QACF,UAAU,UAAU;AAAA,QACpB,WAAY;AACV,8BAAoB,KAAK,UAAU,SAAS;AAAA,QAC9C;AAAA,QACA,GAAG,oBAAoB;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAEA,WAAS,oBAAoB,KAAK,UAAU;AAC1C,WAAO,KAAK;AAAA,MACV,QACE;AAAA,MACF,MAAM;AAAA,QACJ,eAAe,SAAS;AAAA,QACxB,SAAS,IAAI;AAAA,QACb,SAAS,IAAI,IAAI;AAAA,MACnB;AAAA,MACA,UAAU,SAAU,UAAU;AAC5B,YAAI,SAAS,SAAS;AAAA,QAEtB;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;",
  "names": []
}
