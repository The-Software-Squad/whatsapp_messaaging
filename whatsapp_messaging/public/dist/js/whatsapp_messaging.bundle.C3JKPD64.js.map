{
  "version": 3,
  "sources": ["../../../../../apps/whatsapp_messaging/whatsapp_messaging/public/js/custom_buttons.js"],
  "sourcesContent": ["$(document).on(\"app_ready\", function () {\n\tfrappe.call({\n\t  method:\n\t\t\"whatsapp_messaging.whatsapp_messaging.doctype.whatsapp_message_template.whatsapp_message_template.get_template_doctypes\",\n\t  callback: function (response) {\n\t\tif (response.message) {\n\t\t  var templates_details = response.message;\n\t\t  $.each(Object.keys(templates_details), function (i, doctype) {\n\t\t\tfrappe.ui.form.on(doctype, \"refresh\", function (frm) {\n\t\t\t  addCustomButtons(frm, templates_details[doctype]);\n\t\t\t});\n\t\t  });\n\t\t}\n\t  },\n\t});\n  });\n\n  function addCustomButtons(frm, templates) {\n\tfor (const template in templates) {\n\t  frm.add_custom_button(\n\t\ttemplates[template].label,\n\t\tfunction () {\n\t\t  sendWhatsAppMessage(frm, templates[template]);\n\t\t},\n\t\t__(\"WhatsApp Messaging\"),\n\t  );\n\t}\n  }\n\n  function sendWhatsAppMessage(frm, template) {\n\tfrappe.call({\n\t  method:\n\t\t\"whatsapp_messaging.controller.whatsapp_messaging_on_custom_trigger_handler\",\n\t  args: {\n\t\ttemplate_name: template.name,\n\t\tdoctype: frm.doctype,\n\t\tdocname: frm.doc.name,\n\t  },\n\t  success: function (response) {\n\t\tif (response.message) {\n\t\t  // Show success message\n\t\t  frappe.msgprint({\n\t\t\ttitle: __(\"Success\"),\n\t\t\tmessage: __(\"Message sent successfully\"),\n\t\t\tindicator: \"green\",\n\t\t  });\n\t\t}\n\t  },\n\t  error: function (response) {\n\t\t  // Show error message\n\t\t  frappe.msgprint({\n\t\t\ttitle: __(\"Error\"),\n\t\t\tmessage: __(\"Failed to send message\"),\n\t\t\tindicator: \"red\",\n\t\t  });\n\t  },\n\t  freeze: true,\n\t  freeze_message: __(\"Sending Message...\"),\n\t});\n  }\n"],
  "mappings": ";;AAAA,IAAE,QAAQ,EAAE,GAAG,aAAa,WAAY;AACvC,WAAO,KAAK;AAAA,MACV,QACD;AAAA,MACC,UAAU,SAAU,UAAU;AAC/B,YAAI,SAAS,SAAS;AACpB,cAAI,oBAAoB,SAAS;AACjC,YAAE,KAAK,OAAO,KAAK,iBAAiB,GAAG,SAAU,GAAG,SAAS;AAC9D,mBAAO,GAAG,KAAK,GAAG,SAAS,WAAW,SAAU,KAAK;AACnD,+BAAiB,KAAK,kBAAkB,QAAQ;AAAA,YAClD,CAAC;AAAA,UACA,CAAC;AAAA,QACH;AAAA,MACC;AAAA,IACF,CAAC;AAAA,EACA,CAAC;AAED,WAAS,iBAAiB,KAAK,WAAW;AAC3C,eAAW,YAAY,WAAW;AAChC,UAAI;AAAA,QACL,UAAU,UAAU;AAAA,QACpB,WAAY;AACV,8BAAoB,KAAK,UAAU,SAAS;AAAA,QAC9C;AAAA,QACA,GAAG,oBAAoB;AAAA,MACtB;AAAA,IACF;AAAA,EACC;AAEA,WAAS,oBAAoB,KAAK,UAAU;AAC7C,WAAO,KAAK;AAAA,MACV,QACD;AAAA,MACC,MAAM;AAAA,QACP,eAAe,SAAS;AAAA,QACxB,SAAS,IAAI;AAAA,QACb,SAAS,IAAI,IAAI;AAAA,MAChB;AAAA,MACA,SAAS,SAAU,UAAU;AAC9B,YAAI,SAAS,SAAS;AAEpB,iBAAO,SAAS;AAAA,YACjB,OAAO,GAAG,SAAS;AAAA,YACnB,SAAS,GAAG,2BAA2B;AAAA,YACvC,WAAW;AAAA,UACV,CAAC;AAAA,QACH;AAAA,MACC;AAAA,MACA,OAAO,SAAU,UAAU;AAE1B,eAAO,SAAS;AAAA,UACjB,OAAO,GAAG,OAAO;AAAA,UACjB,SAAS,GAAG,wBAAwB;AAAA,UACpC,WAAW;AAAA,QACV,CAAC;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,MACR,gBAAgB,GAAG,oBAAoB;AAAA,IACzC,CAAC;AAAA,EACA;",
  "names": []
}
